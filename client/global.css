/** @import must precede all other statements */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /*
   * Premium Design System variables (hex-based for clarity)
   */
  :root {
    /* Core colors */
    --bg: #0f1724; /* deep charcoal for modern look */
    --bg-card: #0b1220; /* slightly lighter for cards */
    --text: #e6eef8; /* near-white for contrast */
    --text-muted: #9fb0c9; /* muted blue-gray */
    --border: rgba(255,255,255,0.06);

    /* Primary palette */
    --primary: #5b8cff; /* electric blue */
    --primary-dark: #1f3f8a; /* deep indigo */
    --primary-light: linear-gradient(90deg, rgba(91,140,255,0.12), rgba(31,63,138,0.06));

    /* Accent palettes */
    --accent-teal: #20c997;
    --accent-rose: #ff6b6b;
    --accent-amber: #ffb86b;

    /* Neutral scale */
    --neutral-900: #0b1220;
    --neutral-700: #263444;
    --neutral-500: #6b7b8c;
    --neutral-300: #9fb0c9;
    --neutral-100: #e6eef8;

    /* Success / warning / danger */
    --success: #20c997;
    --warning: #ffb86b;
    --danger: #ff6b6b;
    --info: #5b8cff;

    /* Radii & shadows */
    --radius: 12px;
    --card-radius: 14px;
    --shadow-sm: 0 6px 18px rgba(2,6,23,0.6);
    --shadow-md: 0 18px 40px rgba(2,6,23,0.6);
    --shadow-lg: 0 30px 80px rgba(10,24,48,0.65);

    /* Animations */
    --transition-fast: all 0.14s cubic-bezier(.2,.9,.2,1);
    --transition: all 0.22s cubic-bezier(.2,.9,.2,1);

    /* Layout */
    --sidebar-width: 260px;
    --content-max-width: 1320px;
  }

  .light {
    --bg: #f5f7fb;
    --bg-card: #ffffff;
    --text: #0b1220;
    --text-muted: #59677a;
    --border: #e6eef8;
    --shadow-sm: 0 8px 24px rgba(12,18,34,0.06);
    --shadow-md: 0 16px 48px rgba(12,18,34,0.06);
  }

  .dark {
    --bg: #071022;
    --bg-card: #071829;
    --text: #e6eef8;
    --text-muted: #9fb0c9;
    --border: rgba(255,255,255,0.05);
    --shadow-sm: 0 8px 24px rgba(2,6,23,0.6);
    --shadow-md: 0 18px 50px rgba(2,6,23,0.65);
  }

  /* Utility components using design tokens */
  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    color: var(--text);
    border-radius: var(--card-radius);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    padding: 20px;
    backdrop-filter: blur(6px);
  }

  .card-elevated {
    box-shadow: var(--shadow-lg);
    transform: translateZ(0);
  }

  .glass-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.04);
    backdrop-filter: blur(8px) saturate(1.08);
  }

  .card-clickable {
    cursor: pointer;
    transition: var(--transition);
  }
  .card-clickable:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-md);
  }

  .kpi {
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .kpi .value {
    font-size: 32px;
    font-weight: 800;
    color: var(--text);
  }
  .kpi .label {
    color: var(--text-muted);
  }

  .kpi-premium {
    background: linear-gradient(90deg, rgba(91,140,255,0.08), rgba(32,201,151,0.04));
    padding: 14px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 14px;
    border: 1px solid rgba(255,255,255,0.03);
  }
  .kpi-premium .value {
    font-size: 28px;
    font-weight: 800;
    color: var(--neutral-100);
  }
  .kpi-premium .label {
    color: var(--text-muted);
    font-size: 13px;
  }

  .btn-premium {
    background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    color: white;
    padding: 10px 16px;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(91,140,255,0.14);
    transition: var(--transition);
    border: none;
  }
  .btn-premium:hover {
    transform: translateY(-2px);
    filter: brightness(1.03);
  }

  /* General buttons */
  .btn {
    background: var(--bg-card);
    color: var(--text);
    padding: 8px 12px;
    border-radius: 8px;
    border: 1px solid var(--border);
    transition: var(--transition);
  }
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
  }
  .btn-ghost {
    background: transparent;
    border: 1px dashed var(--border);
    color: var(--text);
    padding: 6px 10px;
    border-radius: 8px;
  }
  .btn-sm {
    padding: 6px 8px;
    font-size: 13px;
    border-radius: 6px;
  }
  .btn-destructive {
    background: linear-gradient(90deg, var(--danger), #b91c1c);
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
  }
  .btn-primary {
    background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    color: white;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    box-shadow: 0 8px 24px rgba(91,140,255,0.12);
  }

  .tabs-premium {
    display: flex;
    gap: 8px;
  }
  .tabs-premium .tab {
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: var(--transition);
  }
  .tabs-premium .tab.active {
    font-weight: 600;
    box-shadow: inset 0 -2px 0 var(--primary);
  }

  .modal-premium {
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    backdrop-filter: blur(6px);
    border-radius: 20px;
    box-shadow: var(--shadow-lg);
    padding: 24px;
  }

  .sidebar-premium {
    width: var(--sidebar-width);
    background: linear-gradient(180deg, var(--bg-card), rgba(255,255,255,0.02));
    border-right: 1px solid var(--border);
    padding: 16px;
  }

  /* transitions global */
  * {
    transition: var(--transition);
  }
}

@layer components {
  .card {
    @apply bg-card text-card-foreground rounded-lg shadow-sm border border-border p-4;
  }
  .brand-btn {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-md text-white bg-primary hover:opacity-95 shadow;
    background-color: hsl(var(--primary));
  }
}

/* Airbnb-like clusters and animations */
.airbnb-cluster-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
}
.airbnb-cluster {
  transition:
    transform 300ms cubic-bezier(0.22, 0.9, 0.33, 1),
    opacity 220ms ease-out;
  transform-origin: center center;
}
.airbnb-cluster-32 { width: 32px; height: 32px; }
.airbnb-cluster-44 { width: 44px; height: 44px; }
.airbnb-cluster-56 { width: 56px; height: 56px; }
.airbnb-cluster-70 { width: 70px; height: 70px; }

/* pulse for critical clusters */
@keyframes airbnb-pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.06); opacity: 0.85; } 100% { transform: scale(1); opacity: 1; } }
.airbnb-cluster-pulse { animation: airbnb-pulse 2.6s ease-in-out infinite; }

/* cluster explosion animation */
@keyframes cluster-explode { 0% { transform: scale(1); opacity: 1 } 30% { transform: scale(0.95); opacity: 0.9 } 60% { transform: scale(1.05); opacity: 0.95 } 100% { transform: scale(1); opacity: 1 } }
.airbnb-cluster-explode { animation: cluster-explode 420ms cubic-bezier(0.22, 0.9, 0.33, 1); }

/* marker appearance */
.airbnb-marker-wrap { transition: transform 320ms cubic-bezier(0.22, 0.9, 0.33, 1), opacity 260ms ease-out; }
.airbnb-marker-wrap .airbnb-marker { transform-origin: center center; }
.airbnb-marker-wrap.show { animation: marker-appear 380ms cubic-bezier(0.22, 0.9, 0.33, 1) both; }
@keyframes marker-appear { 0% { transform: scale(0.7); opacity: 0 } 100% { transform: scale(1); opacity: 1 } }

/* heatmap breathing */
@keyframes heat-breathe { 0% { opacity: 0.9 } 50% { opacity: 0.75 } 100% { opacity: 0.9 } }
.heat-breathe { animation: heat-breathe 4s ease-in-out infinite; }

/* drawer style */
.airbnb-drawer { transition: transform 320ms cubic-bezier(0.22, 0.9, 0.33, 1), opacity 300ms ease-out; transform-origin: right center; }

/* hover halo */
.airbnb-cluster-wrap:hover .airbnb-cluster { box-shadow: 0 18px 36px rgba(2,6,23,0.45), 0 0 18px rgba(255,255,255,0.02); transform: translateY(-4px) scale(1.03); }

/* ensure heat canvas sits under overlays */
.leaflet-overlay-pane canvas.heatmap-canvas { pointer-events: none; }

/* small responsive tweak */
@media (max-width: 768px) { .airbnb-drawer { width: calc(100vw - 48px); right: 12px; } }

@layer base {
  * { @apply border-border; }

  body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    @apply bg-background text-foreground antialiased;
  }

  :where(p, span, li, h1, h2, h3, h4, h5, h6, a, button, label, td, th) { overflow-wrap: anywhere; word-break: break-word; }
  pre, code { overflow-x: auto; white-space: pre; }
}
