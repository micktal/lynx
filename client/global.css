/** @import must precede all other statements */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /*
   * Premium Design System variables (hex-based for clarity)
   */
  :root {
    /* Colors */
    --bg: #F5F7FA;
    --bg-card: #FFFFFF;
    --text: #0D1117;
    --text-muted: #718096;
    --border: #E2E8F0;

    --primary: #0A84FF;
    --primary-dark: #06345A;
    --primary-light: #E5F1FF;

    --neutral-900: #0D1117;
    --neutral-700: #2D3748;
    --neutral-500: #718096;
    --neutral-300: #CBD5E0;
    --neutral-100: #EDF2F7;

    --success: #0FBF7F;
    --warning: #FFB020;
    --danger: #E02424;
    --info: #3182CE;

    /* Radii & shadows */
    --radius: 12px;
    --card-radius: 16px;
    --shadow-sm: 0 4px 12px rgba(0,0,0,0.06);
    --shadow-md: 0 10px 30px rgba(0,0,0,0.05);

    /* Animations */
    --transition-fast: all 0.18s ease;
    --transition: all 0.25s ease;

    /* Layout */
    --sidebar-width: 240px;
    --content-max-width: 1320px;
  }

  .dark {
    --bg: #0D1117;
    --bg-card: #161B22;
    --text: #E5E7EB;
    --text-muted: #9CA3AF;
    --border: #2D3748;
    --shadow-sm: 0 10px 30px rgba(0,0,0,0.4);
  }

  /* Utility components using design tokens */
  .card {
    background: var(--bg-card);
    color: var(--text);
    border-radius: var(--card-radius);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    padding: 24px;
  }

  .card-clickable { cursor: pointer; transition: var(--transition); }
  .card-clickable:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }

  .kpi {
    display: flex; align-items: center; gap: 16px;
  }
  .kpi .value { font-size: 32px; font-weight: 700; }
  .kpi .label { color: var(--text-muted); }

  .kpi-premium { background: linear-gradient(90deg, rgba(10,132,255,0.12), rgba(6,52,90,0.06)); padding: 12px; border-radius: 12px; display:flex; align-items:center; gap:12px; }
  .kpi-premium .value { font-size: 28px; font-weight:800; color: var(--neutral-900); }
  .kpi-premium .label { color: var(--text-muted); font-size: 13px; }

  .btn-premium { background: linear-gradient(90deg,var(--primary),var(--primary-dark)); color: white; padding: 10px 16px; border-radius: 10px; box-shadow: rgba(10,136,255,0.18) 0 6px 20px; transition: var(--transition); border: none; }
  .btn-premium:hover { transform: translateY(-2px); }

  /* General buttons */
  .btn { background: var(--bg-card); color: var(--text); padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); transition: var(--transition); }
  .btn:hover { transform: translateY(-2px); box-shadow: var(--shadow-sm); }
  .btn-ghost { background: transparent; border: 1px dashed var(--border); color: var(--text); padding: 6px 10px; border-radius: 8px; }
  .btn-sm { padding: 6px 8px; font-size: 13px; border-radius: 6px; }
  .btn-destructive { background: linear-gradient(90deg,var(--danger),#b91c1c); color: white; padding: 8px 12px; border-radius: 8px; border: none; }
  .btn-primary { background: linear-gradient(90deg,var(--primary),var(--primary-dark)); color: white; padding: 8px 12px; border-radius: 8px; border: none; }

  .tabs-premium { display:flex; gap:8px; }
  .tabs-premium .tab { padding:8px 12px; border-radius:8px; cursor:pointer; transition: var(--transition); }
  .tabs-premium .tab.active { font-weight:600; box-shadow: inset 0 -2px 0 var(--primary); }

  .modal-premium { background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4)); backdrop-filter: blur(6px); border-radius: 20px; box-shadow: 0 30px 60px rgba(2,6,23,0.6); padding: 24px; }

  .sidebar-premium { width: var(--sidebar-width); background: linear-gradient(180deg,var(--bg-card), rgba(255,255,255,0.02)); border-right: 1px solid var(--border); padding:16px; }

  /* transitions global */
  * { transition: var(--transition); }
}

@layer components {
  .card {
    @apply bg-card text-card-foreground rounded-lg shadow-sm border border-border p-4;
  }
  .brand-btn {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-md text-white bg-primary hover:opacity-95 shadow;
    background-color: hsl(var(--primary));
  }
}

/* Airbnb-like clusters and animations */
.airbnb-cluster-wrap { display:flex; align-items:center; justify-content:center; }
.airbnb-cluster { transition: transform 300ms cubic-bezier(.22,.9,.33,1), opacity 220ms ease-out; transform-origin:center center; }
.airbnb-cluster-32 { width:32px; height:32px; }
.airbnb-cluster-44 { width:44px; height:44px; }
.airbnb-cluster-56 { width:56px; height:56px; }
.airbnb-cluster-70 { width:70px; height:70px; }

/* pulse for critical clusters */
@keyframes airbnb-pulse { 0%{ transform: scale(1); opacity:1 } 50%{ transform: scale(1.06); opacity:0.85 } 100%{ transform: scale(1); opacity:1 } }
.airbnb-cluster-pulse { animation: airbnb-pulse 2.6s ease-in-out infinite; }

/* cluster explosion animation */
@keyframes cluster-explode { 0% { transform: scale(1); opacity:1 } 30% { transform: scale(0.95); opacity:0.9 } 60% { transform: scale(1.05); opacity:0.95 } 100% { transform: scale(1); opacity:1 } }
.airbnb-cluster-explode { animation: cluster-explode 420ms cubic-bezier(.22,.9,.33,1); }

/* marker appearance */
.airbnb-marker-wrap { transition: transform 320ms cubic-bezier(.22,.9,.33,1), opacity 260ms ease-out; }
.airbnb-marker-wrap .airbnb-marker { transform-origin:center center; }
.airbnb-marker-wrap.show { animation: marker-appear 380ms cubic-bezier(.22,.9,.33,1) both; }
@keyframes marker-appear { 0% { transform: scale(0.7); opacity:0 } 100% { transform: scale(1); opacity:1 } }

/* heatmap breathing */
@keyframes heat-breathe { 0% { opacity: 0.9 } 50% { opacity: 0.75 } 100% { opacity: 0.9 } }
.heat-breathe { animation: heat-breathe 4s ease-in-out infinite; }

/* drawer style */
.airbnb-drawer { transition: transform 320ms cubic-bezier(.22,.9,.33,1), opacity 300ms ease-out; transform-origin: right center; }

/* hover halo */
.airbnb-cluster-wrap:hover .airbnb-cluster { box-shadow: 0 18px 36px rgba(2,6,23,0.45), 0 0 18px rgba(255,255,255,0.04); transform: translateY(-4px) scale(1.03); }

/* utility for small cluster sizes */
.airbnb-cluster-32, .airbnb-cluster-44, .airbnb-cluster-56, .airbnb-cluster-70 { display:flex; align-items:center; justify-content:center; }

/* ensure heat canvas sits under overlays */
.leaflet-overlay-pane canvas.heatmap-canvas { pointer-events:none; }

/* small responsive tweak */
@media (max-width: 768px) { .airbnb-drawer { width: calc(100vw - 48px); right: 12px; } }

@layer base {
  * {
    @apply border-border;
  }

  body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    @apply bg-background text-foreground antialiased;
  }

  :where(p, span, li, h1, h2, h3, h4, h5, h6, a, button, label, td, th) {
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  pre,
  code {
    overflow-x: auto;
    white-space: pre;
  }
}
